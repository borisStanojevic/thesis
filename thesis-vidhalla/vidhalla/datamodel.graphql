#SET_ NULL (default) | CASCADE

type User {
  id: ID! @unique
  email: String! @unique
  password: String!
  firstName: String
  lastName: String
  profilePicture: String!
  channelDescription: String
  isBlocked: Boolean!
  role: Role
  subscribers: [User!]!
  videosUploaded: [Video!]! @relation(name: "VideoToUser", onDelete: CASCADE)
  commentsPosted: [Comment!]!
    @relation(name: "CommentToUser", onDelete: CASCADE)
}

enum Role {
  ADMIN
  STANDARD
}

type Video {
  id: ID! @unique
  url: String!
  title: String!
  description: String
  visibility: Visibility!
  isCommentingAllowed: Boolean!
  isRatingVisible: Boolean!
  isBlocked: Boolean
  views: Int!
  likes: Int!
  dislikes: Int!
  uploader: User! @relation(name: "VideoToUser", onDelete: SET_NULL)
  comments: [Comment!]! @relation(name: "CommentToVideo", onDelete: CASCADE)
}

type VideoVote {
  id: ID! @unique
  author: User!
  video: Video!
  type: VoteType
}

enum Visibility {
  PUBLIC
  UNLISTED
  PRIVATE
}

type Comment {
  id: ID! @unique
  content: String!
  likes: Int!
  dislikes: Int!
  video: Video! @relation(name: "CommentToVideo", onDelete: SET_NULL)
  author: User! @relation(name: "CommentToUser", onDelete: SET_NULL)
}

type CommentVote {
  id: ID! @unique
  author: User!
  comment: Comment!
  type: VoteType!
}

enum VoteType {
  UPVOTE
  DOWNVOTE
}

# type Query {
#   greeting(name: String): String!
#   me: User!
#   users(query: String): [User!]!
# }

# type Mutation {
#   createUser(data: CreateUserInput!): User!
#   deleteUser(id: ID!): User!
#   updateUser(id: ID!, data: UpdateUserInput!): User!
#   createVideo(url: String!, description: String, uploader: ID!): Video!
#   createComment(content: String!, author: ID!, video: ID!): Comment!
# }

# type Subscription {
#   comment(videoId: ID!): CommentSubscriptionPayload!
# }

# enum MutationType {
#   CREATED
#   UPDATED
#   DELETED
# }

# type CommentSubscriptionPayload {
#   mutation: MutationType!
#   data: Comment!
# }

# input CreateUserInput {
#   username: String!
#   email: String!
#   role: Role
# }

# input UpdateUserInput {
#   email: String
#   role: Role
#   firstName: String
# }
